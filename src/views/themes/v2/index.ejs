<%- include('../../partials/header', {title: 'RSS Feed'}) -%>
<script>
  let style = <%=theme%>;

  let parameters = {
    page: 1,
    limit: parseInt(<%=limit%>),
    search: null,
    type: null
  }

  let loadedPage;

  const currentUrl = new URL(window.location.href);
  // const newURL = new URL(window.location.href);
  currentUrl.searchParams.forEach((value, key) => {
    // if (!key) newURL.searchParams.append(key, value);
    console.log(`${key}=${value}`);
    parameters[key] = value

    if (key.includes('theme')) {
      style = value
      console.log('theme updated')
    }

  });
  console.log(parameters)

  const blog = new SimpBlog()
</script>

<div id='main'>
  <%- include('widgets/sorted-labels') %>
  <%- include('widgets/archive-menu') %>
  <%- include('widgets/toolbar') %>
  <%- include('widgets/search-form') %>
  <%- include('widgets/navigation') %>
  <%- include('../../widgets/nsfw-modal', {init: false}) -%>
  <%- include('widgets/display-posts') %>
  <%- include('widgets/pagination') %>
</div>