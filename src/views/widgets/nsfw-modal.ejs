<style>
  NSFW {
    display: none;
  }
</style>
<script>
  const Widgets_NSFWModal = {
    element: document.querySelectorAll('nsfw'),
    async init() {
      document.querySelectorAll('nsfw').forEach((element, index) => {
        const div = document.createElement('div');
        div.id = 'nsfw-modal' + index

        const prompt = document.createElement('div');
        prompt.textContent = 'I am 18+ years old or older';
        prompt.style.fontFamily = 'Arial, sans-serif';
        div.appendChild(prompt);

        const createButton = (text, value) => {
          const button = document.createElement('button');
          button.textContent = text;
          button.onclick = () => {
            element.style.display = value ? 'block' : 'none';
            if (value) div.style.display = 'none';
          };
          div.appendChild(button);
        };

        const YES = createButton('YES', true);
        const NO = createButton('NO', false);

        //if div doesn't exist
        if (document.querySelector('#' + div.id) == null) {
          // display warning box
          element.insertAdjacentElement('beforebegin', div);
          // hide nsfw content
          element.style.display = 'none';
        }
      });
    },
  };
</script>

<%if(init) {%>
<script>
  window.addEventListener('load', Widgets_NSFWModal.init);
</script>
<%}%>