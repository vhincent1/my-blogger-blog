<%- include('../partials/header', {title: 'RSS Feed'}) -%>
<%- include('sorted-labels', {path: ''}) -%>
<%- include('archive-menu') -%>
<!-- Pagination -->
<%- include('pagination') -%>
<%- include('autoscroll', { 
  parameters: paginationResult.parameters, 
  currentPage: paginationResult.currentPage,
  limit: paginationResult.limit,
  style: viewIndex? 0 : 1}) -%>
<!-- Footer -->
<%- include('../partials/footer') -%>
<h1>Latest Articles from RSS FeedğŸ“¡ğŸ›°ï¸</h1>

<!-- Index view -->
<% if(viewIndex){ %>
<style>
  table {
    /* width: 100%; */
  }

  td,
  th {
    /* border: 1px solid #dddddd; */
    text-align: left;
  }
</style>
<div class="feed-item">
  <table id="indexTable" style="width: 100%">
    <tr>
      <th>Title</th>
      <th style="width: 5%">Published</th>
      <th style="width: 1%">Size</th>
      <th style="width: 40%">Links</th>
    </tr>
    <% paginationResult.data.forEach(post => { %>
    <tr>
      <td><%= post.title%></td>
      <td><%= post.date.published.toLocaleDateString() %></td>
      <td><%= post.size.total.count %><sup>(<%= post.size.total.format %>)</sup></td>
      <td>[<a href="<%=common.links.viewPost({id: post.id})%>">view</a>][<a href="<%=common.links.editPost(post)%>">edit</a>]</td>
    </tr>
    <% }); %>
  </table>
</div>

<% } else { %>

<!-- Posts view -->
<% paginationResult.data.forEach((post) => { %>
<div class="feed-item">
  <a href="<%= common.links.viewPost({id: post.id}) %>">
    <h2><%= post.title %></h2>
  </a>
  <%- post.content -%>
</div>
<% }); %>
<% } %>
<div id="rss-feed-container">
  <!-- RSS feed items will be dynamically inserted here -->
</div>